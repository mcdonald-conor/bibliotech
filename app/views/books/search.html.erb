<h1 style="text-align: center; font-size: 16px;"><strong>Your Reading List</strong></h1>

<% if @books.any? %>
  <div class="cards-container">
    <% @books.each do |book| %>
      <% if book.is_a?(Hash) %>
        <div data-controller="books" data-books-url-value="<%= books_url %>" class="card" data-target="books.card">
          <% if book['cover_url'] %>
            <img src="<%= book['cover_url'] %>" alt="Book cover" style="width:100px;height:150px;" data-target="books.cover"><br>
          <% end %>
          <strong>Title:</strong> <span data-target="books.title"><%= book['title'] %></span><br>
          <strong>Author:</strong> <span data-target="books.author"><%= book['author'] %></span><br>
          <strong>Description:</strong> <span data-target="books.description"><%= book['description'] %></span><br>
          <strong>Source:</strong> <span data-target="books.source"><%= book['source'] %></span><br>
          <strong>ISBN:</strong> <span data-target="books.isbn"><%= book['isbn'] %></span><br>
          <%= form_with model: Book.new, url: books_path, data: { action: "submit->books#add", 'books-target': "form" } do |f| %>
            <%= f.hidden_field :title, value: book['title'] %>
            <%= f.hidden_field :author, value: book['author'] %>
            <%= f.hidden_field :description, value: book['description'] %>
            <%= f.hidden_field :source, value: book['source'] %>
            <%= f.hidden_field :isbn, value: book['isbn'] %>

            <%= f.submit "Save to Library", class: "results-button", data: { 'books-target': 'button' } %>
          <% end %>
        </div>
      <% else %>
        <p>Invalid book data: <%= book.inspect %></p>
      <% end %>
    <% end %>
  </div>
<% else %>
  <p>No books found.</p>
<% end %>
